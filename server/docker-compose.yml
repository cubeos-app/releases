# CubeOS Releases Server
# Deploy to /srv/cubeos-releases/ on DMZ nodes.
# AWX deploys via: deploy_dmz_service.yml (service_name=cubeos-releases, compose_dir=/srv/cubeos-releases)

name: cubeos-releases

services:
  nginx:
    image: cgr.dev/chainguard/nginx:latest
    container_name: cubeos-releases
    restart: unless-stopped
    ports:
      - "8082:8080"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./data:/data:ro
    read_only: true
    tmpfs:
      - /tmp:size=64m
    deploy:
      resources:
        limits:
          memory: 128M
        reservations:
          memory: 32M
